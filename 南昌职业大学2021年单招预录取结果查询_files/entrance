(function(){var k={"id":"5d3a4d61319f71440db86a5f","invite":{"bkcolor":"#36cfc9","btncolor":"#ffffff","showtxt":true,"txt":"欢迎来到本网站，请问有什么可以帮到你？","txtcolor":"#36cfc9"},"leavingmsgpc":{"guide":"您好，很抱歉不能为您服务，如需帮忙，请留言。","tip":"您好，为了更好的解决您的问题，请告诉我们您的姓名和问题描述"},"mini":{"bkcolor":"#36cfc9","btnheight":50,"btnwidth":200},"mobilemini":{"btnheight":30,"btnwidth":100},"satisfactionEva":{"assesLabels":["回答不及时","服务态度差","不礼貌","没解决问题"],"enableSolve":true,"stars":[{"guideMsg":"欢迎给我们服务提建议～","guideRequired":false,"labelRequired":false,"labels":["回答不及时","服务态度差","不礼貌","没解决问题"],"level":"oneStar","remark":"非常不满意，特别失望"},{"guideMsg":"欢迎给我们服务提建议～","guideRequired":false,"labelRequired":false,"labels":["回答不及时","服务态度差","不礼貌","没解决问题"],"level":"twoStar","remark":"不满意，有点失望"},{"guideMsg":"欢迎给我们服务提建议～","guideRequired":false,"labelRequired":false,"labels":["回答不及时","服务态度差","不礼貌","没解决问题"],"level":"threeStar","remark":"一般，还需改善"},{"guideMsg":"欢迎给我们服务提建议～","guideRequired":false,"labelRequired":false,"labels":["回答不及时","服务态度差","不礼貌","没解决问题"],"level":"fourStar","remark":"满意，仍可改善"},{"guideRequired":false,"labelRequired":false,"level":"fiveStar","remark":"非常满意，完美"}]},"sid":"5d3a4d612387a40d53382489","spid":"10000","talk":{"btn":[],"link":"","logo":"","poster":[],"question":[],"showbtn":true,"showlogo":false,"showposter":true,"showquestion":true,"signature":""},"visetting":{"fields":[{"access":"","defval":"","desc":"","disabledFlag":false,"dtype":"text","enabled":true,"fid":"name","ftype":"text","label":"姓名","len":0,"meta":"PRESET","pfid":"","required":true,"style":"half"},{"access":"","defval":"","desc":"","disabledFlag":false,"dtype":"text","enabled":true,"fid":"contact","ftype":"mobile","label":"手机号","len":0,"meta":"PRESET","pfid":"","required":false,"style":""},{"access":"","defval":"","desc":"","disabledFlag":false,"dtype":"text","enabled":false,"fid":"email","ftype":"email","label":"电子邮箱","len":0,"meta":"CUSTOM","pfid":"","required":false,"style":""},{"access":"","defval":"","desc":"","disabledFlag":false,"dtype":"text","enabled":false,"fid":"qq","ftype":"text","label":"QQ","meta":"CUSTOM","pfid":"","required":false,"style":"normal"},{"access":"","defval":"","desc":"","disabledFlag":false,"dtype":"text","enabled":false,"fid":"address","ftype":"text","label":"地址","len":0,"meta":"CUSTOM","pfid":"","required":false,"style":"half"},{"access":"","defval":"","desc":"","disabledFlag":false,"dtype":"text","enabled":false,"fid":"company","ftype":"text","label":"公司名称","len":0,"meta":"CUSTOM","pfid":"","required":false,"style":"half"},{"access":"","defval":"","desc":"","disabledFlag":false,"dtype":"text","enabled":false,"fid":"note","ftype":"textarea","label":"备注","len":0,"meta":"CUSTOM","pfid":"","required":false,"style":""}]}}||{mini:{bkcolor:"rgb(54, 207, 201)",btnheight:50,btnwidth:110},invite:{bkcolor:"rgb(54, 207, 201)",btncolor:"#ffffff",txtcolor:"rgb(54, 207, 201)",txt:"欢迎来到本网站，请问有什么可以帮到你？"}};var d={"refuseAgainChatSecend":5,"refuseChat":"2","autoChat":false,"autoChatSecend":3}||{refuseAgainChatSecend:15000};var a=''||{probList:[]};var t="5d3a4d612387a40d5338248a";var x=navigator.userAgent;var o=x.match(/(iPad).*OS\s([\d_]+)/);var r=!o&&x.match(/(iPhone\sOS)\s([\d_]+)/);var A=x.match(/(Android)\s+([\d.]+)/);var q=r||A;if(typeof Promise==="undefined"){Promise=function(E){var C=[];var D=[];this.status="pending";this.then=function(F){C.push(F);return this};this["catch"]=function(F){D.push(F);return this};E(function(){},function(){})}}var c={ajax:function(C){return new Promise(function(K,M){var D=C.url;var H=C.type||"get";var E=C.async||true;var I=C.contentType==="json"?"application/json":"application/x-www-form-urlencoded";var F=C.contentType==="json"?JSON.stringify(C.data||{}):(C.data||{});var J=C.success||function(){};var G=C.error||function(){};var L=new XMLHttpRequest();L.onreadystatechange=function(N){if(L.readyState===XMLHttpRequest.DONE){if(L.status===200){var O=L.responseText?JSON.parse(L.responseText):{success:true};J(O);K(O)}}};L.onerror=function(N){G(L);M(N)};L.open(H,D,E);L.withCredentials=true;L.setRequestHeader("Content-Type",I);L.send(F)})},getUrl:function(){var C=document.getElementById("bangbossScript");var D=C.src.split("/resources")[0];return D},getScriptAttr:function(D){var C=document.getElementById("bangbossScript");var E=C.getAttribute(D);return E},linkTo:function(){b="consulted";window.sessionStorage.setItem("hasConsulted","consulted");clearInterval(n);linKUrl=c.getUrl()+"/web/home?ak="+t+(h?"&uid="+h:"")+(s?"&K04="+encodeURI(s):"");if(q){location.href=linKUrl}else{if(!h&&!s&&a.probList&&a.probList.length>0){j.show()}else{if(y==="self"){u.show({uid:h,K04:s})}else{window.open(linKUrl,"_blank")}}}},sendMsg:function(C){var D=window.frames.cikeTalk;D.postMessage(C,f)},};var v=false;var b=window.sessionStorage.getItem("hasConsulted");var f=c.getUrl();var y=c.getScriptAttr("target")||"";var e=c.getScriptAttr("customBtn")||"";var w=c.getScriptAttr("forbidInvite")||"";var s=c.getScriptAttr("customField")||"";var h="";var n=null;var m=null;if(w){d.autoChat=false}var z={dom:null,created:function(C){this.dom=document.createElement("div");this.dom.className="bangbossCsmCustomAccessBtn";this.dom.style.cssText="margin: 0px; position: fixed; display: block; text-align: center; z-index: 8000; cursor: pointer; background: "+k.mini.bkcolor+"; right: 10px; bottom: 20px; color: rgb(255, 255, 255); font-size: 14px; border-radius: 25px;height:"+k.mini.btnheight+"px;line-height:"+k.mini.btnheight+"px;width:"+k.mini.btnwidth+"px;";this.dom.innerHTML='<img src="https://bangboss-csm.oss-cn-hangzhou.aliyuncs.com/resources/img/manualservice.png" style="margin-right: 10px; font-size: 14px; font-style: normal; width: 25px; height: 25px; vertical-align:middle;"><i style="font-size: 14px; font-style: normal; display: inline-block; ">在线咨询</i>';C.appendChild(this.dom)},btnClickHandler:function(C){g.hide();if(!q&&y=="self"&&v){u.show()}else{c.linkTo()}}};var g={dom:null,created:function(C){this.dom=document.createElement("div");this.dom.style.cssText="position: fixed;top: 0;left: 0;right: 0;bottom: 0;margin: auto;border-radius: 6px;width:350px;height:0;overflow:hidden;opacity:0;transition:all .5s;padding: 0px;box-sizing:border-box;background:"+k.invite.bkcolor;this.dom.innerHTML='<div style="height:80px;color:#fff;font-size:16px;">'+k.invite.txt+'</div> <div style="text-align:right;line-height:32px;font-size:14px;"><span id="bangbossConfirm" style="display:inline-block;padding:0 10px;cursor:pointer;border-radius: 4px;width:90px;text-align:center;background: '+k.invite.btncolor+"; color: "+k.invite.txtcolor+';">现在咨询</span> <span id="bangbossClose" style="display:inline-block;cursor:pointer;color:#fff;width:90px;text-align:center;">稍后再说</span></div>';C.appendChild(this.dom)},show:function(){if(this.dom){this.dom.style.height="146px";this.dom.style.opacity="1";this.dom.style.padding="18px"}},hide:function(){this.dom.style.height="0px";this.dom.style.opacity="0";this.dom.style.padding="0"},setTimeoutShow:function(C){setTimeout(this.show.bind(this),C*1000)}};var j={dom:null,created:function(H){this.dom=document.createElement("div");this.dom.style.cssText="position: fixed;top: 300px;left: 50%;z-index:9999;margin-left:-250px;width:500px;height:0;overflow:hidden;opacity:0;transition:all .5s;border:1px solid #e7e7e7;box-sizing:border-box;font-size:12px;";var G='<div style="padding-left:20px;line-height:30px;background:#eee;">咨询分类<div id="bangboss-qsclose" style="float:right;padding-right:20px;cursor:pointer;font-size:16px;">×</div></div> <div style="padding: 20px 30px;background:#fff;"><div>';var F="";for(var E=0,C=a.probList.length;E<C;E++){var I="";if(a.probList[E].url){I='<img src="'+a.probList[E].url+'" style="display:inline-block;vertical-align:top;width: 30px;height:30px;border: 1px solid #e7e7e7;margin-bottom:10px;">'}else{I='<span style="display:inline-block;vertical-align:top;width: 30px;height:30px;border: 1px solid #e7e7e7;"></span>'}F+='<div style="display: inline-block;vertical-align: top;width: 33%;margin-bottom: 10px;padding: 0 10px;box-sizing: border-box;text-align: center;word-break: break-all;cursor:pointer;" class="bangboss-qs" data-id='+a.probList[E].id+"><div>"+I+"</div><div>"+a.probList[E].title+"</div></div>"}var D="</div></div></div>";this.dom.innerHTML=G+F+D;H.appendChild(this.dom)},show:function(){this.dom.style.height="auto";this.dom.style.opacity="1"},hide:function(){this.dom.style.height="0";this.dom.style.opacity="0"}};var u={dom:null,iframe:null,msgList:null,created:function(D){this.dom=document.createElement("div");this.iframe=document.createElement("iframe");this.dom.style.cssText="width: 450px; height: 695px; max-height:90%; margin: 0px; padding: 0px; font-size: 12px; position: fixed; z-index: 9000; right: -450px; bottom: 0px; text-align: center;border: 1px solid #ddd;border-right:none;overflow:hidden;transition:all .5s;box-sizing:border-box;";this.iframe.src=f+"/web/home?ak="+t;this.iframe.id="cikeTalk";this.iframe.name="cikeTalk";this.iframe.style.cssText="width:100%;height:100%;border:none;background-color:transparent";var C='<div style="position:absolute;top:13px;right:10px;"><i style="margin-right:5px;display:inline-block;cursor:pointer" class="bangbossShrinkBtn" title="最小化"><img src="https://bangboss-csm.oss-cn-hangzhou.aliyuncs.com/resources/img/shrink.png" style="width:16px;" /></i><i class="bangbossMagnifyBtn" style="margin-right:5px;display:inline-block;cursor:pointer;" title="新窗口打开"><img src="https://bangboss-csm.oss-cn-hangzhou.aliyuncs.com/resources/img/magnify.png" style="width:16px;" /></i><i class="bangbossCloseBtn" style="margin-right:5px;display:inline-block;cursor:pointer;" title="关闭会话"><img src="https://bangboss-csm.oss-cn-hangzhou.aliyuncs.com/resources/img/close.png" style="width:15px;" /></i></div>';this.dom.innerHTML=C;this.dom.appendChild(this.iframe);D.appendChild(this.dom)},show:function(C){this.dom.style.right="0";p.msgList.innerHTML="";if(!v){v=true;c.sendMsg({type:"init",body:C||{}})}},hide:function(){this.dom.style.right="-450px"}};var p={dom:null,msgList:null,created:function(C){this.dom=document.createElement("div");this.dom.id="bangbossMsgListWrap";var D=document.createElement("div");this.msgList=document.createElement("div");this.dom.style.cssText="position: fixed;z-index: 99;right: 10px; bottom: 80px;word-break:break-all;max-width:500px;max-height:70%;overflow:auto;";D.innerHTML='<img src="https://bangboss-csm.oss-cn-hangzhou.aliyuncs.com/resources/img/close.png" style="width:15px;" />';D.className="bangbossClearMsgBtn";D.title="清空会话";D.style.cssText="position: absolute;top:0px;right:0px;z-index:99;padding:4px;border-radius:5px;background:rgba(84,84,84,.4);cursor:pointer;display:none;";this.msgList.id="bangbossMsgList";this.dom.appendChild(D);this.dom.appendChild(this.msgList);C.appendChild(this.dom)}};var B=new Image();B.src=c.getUrl()+"/web/visitor/addRecord?ak="+t+"&title="+encodeURI(document.title)+"&curURL="+document.location.href+"&refURL="+document.referrer;if(!w){n=setInterval(function(){c.ajax({url:f+"/web/chatsession/getInvitationKf",type:"post",contentType:"json",data:{AK:t},success:function(C){if(C.success&&C.data.uid){h=C.data.uid;g.show()}}})},60000)}if(!q&&y==="self"){window.addEventListener("message",function(E){if(E.origin===f){if(E.data.type==="msg"&&u.dom.style.right=="-450px"){var D=document.createElement("div");var C={0:'<div style="width:'+k.mini.btnwidth+'px;">'+E.data.body.content+"</div>",1:'<img src="'+E.data.body.content+'" style="max-width:100%;max-height:100%;" />',2:'<audio controls src="'+E.data.body.content+'" style="outline:none;max-width:100%;" />',3:'<video controls src="'+E.data.body.content+'" style="max-width:100%;" />',8:'<a href="'+E.data.body.content+'" target="_blank" style="width:'+k.mini.btnwidth+'px;">文件：'+(E.data.body.extras&&E.data.body.extras.fname)+"</a>"};D.style="margin-bottom:10px;box-shadow:rgba(15, 66, 76, 0.15) 0px 0px 14px 0px;padding:10px 20px;background:#fff;border-radius:5px;font-size:14px;box-sizing:border-box;";D.innerHTML=C[E.data.body.msgType]||"未知的消息类型";p.msgList.appendChild(D);if(p.msgList.children.length>3){p.msgList.removeChild(p.msgList.firstChild)}}else{if(E.data.type==="opt"&&E.data.body==="close window"){u.hide()}}}},false)}var l={userInfo:null,btnCss:null,util:c,set:function(C,D){this[C]=D;if(C==="userInfo"){if(!this.userInfo||JSON.stringify(this.userInfo)==="{}"){throw Error("用户信息不能传空")}return c.ajax({url:f+"/web/visitor/setThirdInfo",type:"post",contentType:"json",data:{AK:t,userInfo:this.userInfo},})}}};l.set=l.set.bind(l);var i=function(){if(document.getElementsByTagName){m=document.getElementsByTagName("body")[0]}else{if(document.body){m=document.body}else{console.warn("不支持")}}if(!e){z.created(m);if(l.btnCss){for(key in l.btnCss){z.dom.style[key]=l.btnCss[key]}}}var C=document.createElement("style");var D="#bangbossMsgListWrap:hover .bangbossClearMsgBtn{display:block !important;}";C.type="text/css";if(C.styleSheet){C.styleSheet.cssText=D}else{var E=document.createTextNode(D);C.appendChild(E)}m.appendChild(C);if(!q&&y==="self"){p.created(m);u.created(m);var O=document.getElementsByClassName("bangbossShrinkBtn")[0];var N=document.getElementsByClassName("bangbossMagnifyBtn")[0];var J=document.getElementsByClassName("bangbossCloseBtn")[0];var F=document.getElementsByClassName("bangbossClearMsgBtn")[0];O.addEventListener("click",function(){u.hide()});N.addEventListener("click",function(){var P=c.getUrl()+"/web/home?ak="+t+(h?"&uid="+h:"")+(s?"&K04="+encodeURI(s):"");var Q=window.open(P,"_blank");u.hide()});J.addEventListener("click",function(){c.sendMsg("close ws")});F.addEventListener("click",function(){p.msgList.innerHTML=""})}g.created(m);if(!b&&d.autoChat){g.setTimeoutShow(d.refuseAgainChatSecend)}if(a.probList&&a.probList.length>0){j.created(m)}var H=document.getElementById("bangbossConfirm");var M=document.getElementById("bangbossClose");var K=document.getElementById("bangboss-qsclose");var L=document.getElementsByClassName("bangboss-qs");document.addEventListener("click",function(S){var T=S||window.event;var P=false;var R=document.getElementsByClassName("bangbossCsmCustomAccessBtn");for(var Q=0;Q<R.length;Q++){if(R[Q].contains(T.target)){P=true}}if(T.target.className.indexOf&&T.target.className.indexOf("bangbossCsmCustomAccessBtn")>-1||P){z.btnClickHandler()}},true);H.addEventListener("click",function(P){var Q=P||window.event;Q.stopPropagation();z.btnClickHandler()});M.addEventListener("click",function(){c.ajax({url:f+"/web/chatsession/refuseInvitation",type:"post",contentType:"json",data:{AK:t},success:function(P){if(P.success){h="";g.hide();if(!b&&d.refuseChat==="2"){g.setTimeoutShow(d.refuseAgainChatSecend)}}}})});K&&K.addEventListener("click",function(){j.hide();if(!b&&d.refuseChat==="2"){g.setTimeoutShow(d.refuseAgainChatSecend)}});if(L.length>0){for(var G=0,I=L.length;G<I;G++){L[G].addEventListener("click",function(P){j.hide();var Q=P||window.event;Q.stopPropagation();var S=Q.currentTarget.dataset.id;var R=c.getUrl()+"/web/home?ak="+t+"&pid="+S;if(y==="self"){u.show({pid:S})}else{window.open(R,"_blank")}})}}};if(document.readyState==="interactive"||document.readyState==="complete"){setTimeout(i,0)}else{document.addEventListener("DOMContentLoaded",i)}window.getBangbossSetting=function(){return l}})();
